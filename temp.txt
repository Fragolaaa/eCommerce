
	<div>
		<h4><b>Payment Method</b></h4>
		<div class="row">
			<div class="col-md-5">
				<h5 class="text-center">PayPal</h5>
				<div class="table-responsive">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th>Id</th>
								<th>Email</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
							<?php
							$sql = $conn->prepare("SELECT * FROM payment_methods WHERE UserID = ? AND Type = 'paypal'");
							$sql->bind_param('i', $_SESSION["ID"]);
							$sql->execute();
							$result = $sql->get_result();

							if ($result->num_rows > 0) {
								while ($row = $result->fetch_assoc()) {
									echo "  <tr>
                                                                        <td>" . $row["ID"] . "</td>
                                                                        <td>" . $row["Email"] . "</td>
                                                                        <td><button onclick='Delete_PaymentMethod(" . $row['ID'] . ")' class='btn'><i class='bi bi-trash'></i></button></td></td>
                                                                    </tr>";
								}
								echo "<tr><td></td><td></td><td><button data-toggle='modal' onclick='...' class='btn'>Add new</button></td></tr>";
							} else {
								echo "<tr><td>There are no linked PayPal accounts...</td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(1)' class='btn'>Add new</button></td></tr>";
							}
							?>
						</tbody>
					</table>
				</div>
			</div>
			<div class="col-md-7">
				<h5 class="text-center">Visa</h5>
				<div class="table-responsive">
					<table class="table table-bordered">
						<thead class="thead-dark">
							<tr>
								<th>Id</th>
								<th>Card Number</th>
								<th>Card Holder</th>
								<th>Expiration Date</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
							<?php
							$sql = $conn->prepare("SELECT * FROM payment_methods WHERE UserID = ? AND Type = 'visa'");
							$sql->bind_param('i', $_SESSION["ID"]);
							$sql->execute();
							$result = $sql->get_result();

							if ($result->num_rows > 0) {
								while ($row = $result->fetch_assoc()) {
									echo "  <tr>
                                                                        <td>" . $row["ID"] . "</td>
                                                                        <td>" . $row["CardNumber"] . "</td>
                                                                        <td>" . $row["CardHolder"] . "</td>
                                                                        <td>" . $row["ExpirationDate"] . "</td>
                                                                        <td><button onclick='Delete_PaymentMethod(" . $row['ID'] . ")' class='btn'><i class='bi bi-trash'></i></button></td></td>
                                                                    </tr>";
								}
								echo "<tr><td></td><td></td><td></td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(2)' class='btn'>Add new</button></td></tr>";
							} else {
								echo "<tr><td>There are no linked Credit Cards...</td><td></td><td></td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(2)' class='btn'>Add new</button></td></tr>";
							}
							?>
						</tbody>
					</table>
				</div>
			</div>
			<div class="col-md-7">
				<h5 class="text-center">Maestro</h5>
				<div class="table-responsive">
					<table class="table table-bordered">
						<thead class="thead-dark">
							<tr>
								<th>Id</th>
								<th>Card Number</th>
								<th>Card Holder</th>
								<th>Expiration Date</th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
							<?php
							$sql = $conn->prepare("SELECT * FROM payment_methods WHERE UserID = ? AND Type = 'maestro'");
							$sql->bind_param('i', $_SESSION["ID"]);
							$sql->execute();
							$result = $sql->get_result();

							if ($result->num_rows > 0) {
								while ($row = $result->fetch_assoc()) {
									echo "  <tr>
                                                                        <td>" . $row["ID"] . "</td>
                                                                        <td>" . $row["CardNumber"] . "</td>
                                                                        <td>" . $row["CardHolder"] . "</td>
                                                                        <td>" . $row["ExpirationDate"] . "</td>
                                                                        <td><button onclick='Delete_PaymentMethod(" . $row['ID'] . ")' class='btn'><i class='bi bi-trash'></i></button></td></td>
                                                                    </tr>";
								}
								echo "<tr><td></td><td></td><td></td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(2)' class='btn'>Add new</button></td></tr>";
							} else {
								echo "<tr><td>There are no linked Credit Cards...</td><td></td><td></td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(2)' class='btn'>Add new</button></td></tr>";
							}
							?>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div class="col-md-7">
			<h5 class="text-center">MasterCard</h5>
			<div class="table-responsive">
				<table class="table table-bordered">
					<thead class="thead-dark">
						<tr>
							<th>Id</th>
							<th>Card Number</th>
							<th>Card Holder</th>
							<th>Expiration Date</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						<?php
						$sql = $conn->prepare("SELECT * FROM payment_methods WHERE UserID = ? AND Type = 'mastercard'");
						$sql->bind_param('i', $_SESSION["ID"]);
						$sql->execute();
						$result = $sql->get_result();

						if ($result->num_rows > 0) {
							while ($row = $result->fetch_assoc()) {
								echo "  <tr>
                                                                        <td>" . $row["ID"] . "</td>
                                                                        <td>" . $row["CardNumber"] . "</td>
                                                                        <td>" . $row["CardHolder"] . "</td>
                                                                        <td>" . $row["ExpirationDate"] . "</td>
                                                                        <td><button onclick='Delete_PaymentMethod(" . $row['ID'] . ")' class='btn'><i class='bi bi-trash'></i></button></td></td>
                                                                    </tr>";
							}
							echo "<tr><td></td><td></td><td></td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(2)' class='btn'>Add new</button></td></tr>";
						} else {
							echo "<tr><td>There are no linked Credit Cards...</td><td></td><td></td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(2)' class='btn'>Add new</button></td></tr>";
						}
						?>
					</tbody>
				</table>
			</div>
		</div>
		<div class="col-md-7">
			<h5 class="text-center">American Express</h5>
			<div class="table-responsive">
				<table class="table table-bordered">
					<thead class="thead-dark">
						<tr>
							<th>Id</th>
							<th>Card Number</th>
							<th>Card Holder</th>
							<th>Expiration Date</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						<?php
						$sql = $conn->prepare("SELECT * FROM payment_methods WHERE UserID = ? AND Type = 'amex'");
						$sql->bind_param('i', $_SESSION["ID"]);
						$sql->execute();
						$result = $sql->get_result();

						if ($result->num_rows > 0) {
							while ($row = $result->fetch_assoc()) {
								echo "  <tr>
                                                                        <td>" . $row["ID"] . "</td>
                                                                        <td>" . $row["CardNumber"] . "</td>
                                                                        <td>" . $row["CardHolder"] . "</td>
                                                                        <td>" . $row["ExpirationDate"] . "</td>
                                                                        <td><button onclick='Delete_PaymentMethod(" . $row['ID'] . ")' class='btn'><i class='bi bi-trash'></i></button></td></td>
                                                                    </tr>";
							}
							echo "<tr><td></td><td></td><td></td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(2)' class='btn'>Add new</button></td></tr>";
						} else {
							echo "<tr><td>There are no linked Credit Cards...</td><td></td><td></td><td></td><td><button data-toggle='modal' data-target='#myModalAddPaymentMethod' onclick='caricaModalAddPaymentMethod(2)' class='btn'>Add new</button></td></tr>";
						}
						?>
					</tbody>
				</table>
			</div>
		</div>
        		
	<div>
		<h4><b>Address</b></h4>
		<div class="row">
			<div class='col-md-2'></div>
			<?php
			$sql = $conn->prepare("SELECT * FROM addresses WHERE UserID = ? AND ShippingDefault=1)");
			$sql->bind_param('i', $_SESSION["ID"]);
			$sql->execute();
			$result = $sql->get_result();

			if ($result->num_rows > 0) {
				while ($row = $result->fetch_assoc()) {
					if ($row["UserShippingDefault"] == 1) {
						$ind = "<div class='col-md-2'>
                                                        <h5>Shipping Address</h5>
                                                        <p>$row[Address], " . $row["ZIPcode"] . "</p>
                                                        <p>$row[City], $row[Province]</p>
                                                        <button class='btn'>Edit</button>
                                                    </div>";
					}
				}
			}

			if (!isset($ind)) {
				$ind = "  <div class='col-md-2'>
                                                    <center>
                                                        <h5>Shipping Address</h5>
                                                        <p>No address set...</p>
                                                        <button class='btn' data-toggle='modal' data-target='#myModalAddAddress'>Add</button>
                                                    </center>
                                                </div>";
			}
			echo $ind;
			?>
			<div class='col-md-2'></div>
		</div>
		<!-- Modal -->
		<div id='myModalAddAddress' class='modal fade' role='dialog'>
			<div class='modal-dialog'>
				<div class='modal-content'>
					<div class='modal-header'>
						<h4 class='modal-title'>New Address</h4>
					</div>
					<div class='modal-body'>
						<form id='formAddAddress' method='post' action='check/addAddress.php'>
							<div class="form-row">
								<div class="form-group col-sm-9">
									<label class="required">Address</label>
									<input type="text" class="form-control" name='address' placeholder="Address"
										required>
								</div>
								<div class="form-group col-sm-3">
									<label class="required">ZIP Code</label>
									<input type="text" class="form-control" name='zipCode' maxlength="9"
										placeholder="ZIP Code" required>
								</div>
								<div class="form-group col-sm-4">
									<label class="required">Country</label>
									<input type="text" class="form-control" name='country' placeholder="Country"
										required>
								</div>
								<div class="form-group col-sm-4">
									<label class="required">City</label>
									<input type="text" class="form-control" name='city' placeholder="City" required>
								</div>
								<div class="form-group col-sm-4">
									<label class="required">Province</label>
									<input type="text" class="form-control" name='province' placeholder="Province"
										required>
								</div>
							</div>
							<label>Set as default:</label>
							<div class="custom-control custom-checkbox">
								<input type="checkbox" class="custom-control-input" name="paymentDefault"
									id="customCheck1" value="1">
								<label class="custom-control-label" for="customCheck1">Payment Address</label>
							</div>
							<div class="custom-control custom-checkbox">
								<input type="checkbox" class="custom-control-input" name="shippingDefault"
									id="customCheck2" value="1">
								<label class="custom-control-label" for="customCheck2">Shipping Address</label>
							</div>
							<b>
								<p id='error'></p>
							</b>
						</form>
					</div>
					<div class='modal-footer'>
						<button class='btn' onclick="addAddress()">Add</button>
						<button type='button' class='btn btn-default' data-dismiss="modal">Cancel</button>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal -->
		<div id='myModalEditAddress' class='modal fade' role='dialog'>
			<div class='modal-dialog'>
				<div class='modal-content'>
					<div class='modal-header'>
						<h4 class='modal-title'>Edit Address</h4>
					</div>
					<div class='modal-body'>
						<form id='formEditAddress' method='post' action='check/editAddress.php'>
							<div class="form-row">

								<div class='col-md-6'>
									<h5>Shipping Address</h5>
								</div>

								<?php
								$sql = $conn->prepare("SELECT * FROM addresses WHERE UserID = ?");
								$sql->bind_param('i', $_SESSION["ID"]);
								$sql->execute();
								$result = $sql->get_result();

								if ($result->num_rows > 0) {
									while ($row = $result->fetch_assoc()) {

										if ($row["UserShippingDefault"] == 1)
											echo "     <div class='col-md-6'>
                                                                                <p>
                                                                                    <input class='form-check-input' type='radio' name='shippingRadioOptions' checked value='shipping_$row[Id]'>$row[Address], " . $row["ZIP Code"] . "
                                                                                    $row[City], $row[Province]
                                                                                </p>
                                                                            </div>
                                                                        </div>";
										else
											echo "     <div class='col-md-6'>
                                                                                <p>
                                                                                    <input class='form-check-input' type='radio' name='shippingRadioOptions' value='shipping_$row[Id]'>$row[Address], " . $row["ZIP Code"] . "
                                                                                    $row[City], $row[Province]
                                                                                </p>
                                                                            </div>
                                                                        </div>";
									}
								}
								?>
								<b>
									<p id='error'></p>
								</b>
							</div>
						</form>
					</div>
					<div class='modal-footer'>
						<button class='btn' onclick="$('#formEditAddress').submit();">Save</button>
						<button class='btn' onclick="fromEditToAddAddress()">Add New</button>
						<button type='button' class='btn btn-default' data-dismiss="modal">Cancel</button>
					</div>
				</div>
			</div>